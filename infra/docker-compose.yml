version: '3.8'
services:
  pg:
    # ğŸ’¡ pgvector í™•ì¥ì´ í¬í•¨ëœ ì´ë¯¸ì§€ë¡œ ë³€ê²½ (PostgreSQL 17 ë²„ì „ ì‚¬ìš©)
    image: pgvector/pgvector:pg17 
    container_name: castaway-pg
    environment:
      POSTGRES_USER: app
      POSTGRES_PASSWORD: app_password
      POSTGRES_DB: castaway
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U app -d castaway"]
      interval: 3s
      timeout: 3s
      retries: 20
    restart: unless-stopped
    # ğŸ’¾ ë°ì´í„° ì˜ì†ì„±ì„ ìœ„í•´ ë³¼ë¥¨ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
    volumes:
      - pg_data:/var/lib/postgresql/data # ìƒˆë¡œìš´ ë³¼ë¥¨ ì •ì˜

# ğŸ’¾ ë³¼ë¥¨ ì„¹ì…˜ ì¶”ê°€
volumes:
  pg_data: